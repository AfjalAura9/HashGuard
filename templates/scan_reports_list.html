{% extends "base.html" %} {% block title %}Scan Reports{% endblock %} {% block content %}
<style>
  .scan-reports-card {
    background: rgba(10, 18, 14, 0.98);
    border-radius: 22px;
    box-shadow: 0 0 32px 0 rgba(0, 0, 0, 0.1), 0 0 0 2px rgb(0, 0, 0) inset;
    max-width: 720px;
    margin: 48px auto 0 auto;
    color: #ecf0f1;
    font-family: "Poppins", "Segoe UI", Arial, sans-serif;
  }
  .scan-reports-card .card-header {
    background: linear-gradient(90deg, #008bc6 0%, #008bc6 100%);
    color: rgb(255, 255, 255);
    border-radius: 22px 22px 0 0;
    padding: 1.2rem 2rem;
    font-weight: 700;
    font-size: 1.5rem;
    letter-spacing: 1px;
    border-bottom: none;
  }
  .scan-reports-list {
    padding: 0;
    margin: 0;
    list-style: none;
    width: 100%;
  }
  .scan-reports-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #ffffff;
    padding: 1rem 1.2rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    transition: box-shadow 0.2s, border-color 0.2s;
  }
  .scan-reports-list li:hover {
    border-color: #008bc6;
    box-shadow: 0 4px 18px 0 rgba(0, 0, 0, 0.1);
  }
  .scan-reports-list .file-info {
    display: flex;
    align-items: center;
    gap: 0.7rem;
    min-width: 0;
  }
  .scan-reports-list .file-info i {
    font-size: 1.3rem;
    color: #008bc6;
    flex-shrink: 0;
  }
  .scan-reports-list .file-name {
    font-size: 1.08rem;
    font-weight: 600;
    color: #008bc6;
    max-width: 220px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    display: inline-block;
    vertical-align: middle;
  }
  .scan-reports-list .file-date {
    font-size: 0.97rem;
    color: #008bc6;
    margin-left: 0.7rem;
    font-weight: 400;
    white-space: nowrap;
  }
  .scan-reports-list .btn-view {
    background: linear-gradient(90deg, #008bc6 60%, #008bc6 100%);
    color: white;
    font-weight: 700;
    border-radius: 30px;
    font-size: 1.01rem;
    padding: 8px 22px;
    transition: background 0.2s, color 0.2s, transform 0.2s;
    box-shadow: 0 2px 12px rgba(0, 255, 0, 0.03);
    font-family: "Poppins", "Segoe UI", Arial, sans-serif;
    letter-spacing: 0.3px;
  }
  .scan-reports-list .btn-view:hover {
    background: linear-gradient(90deg, #008bc6 10%, #008bc6 100%);
    color: white;
    transform: translateY(-2px) scale(1.03);
    box-shadow: 0 4px 24px 0 rgba(0, 255, 0, 0.13);
    text-decoration: none;
  }
  .scan-reports-empty {
    background: #ffffff;
    color: #008bc6;
    padding: 1.5rem;
    text-align: center;
    font-size: 1.13rem;
    font-family: "Poppins", "Segoe UI", Arial, sans-serif;
  }
  @media (max-width: 600px) {
    .scan-reports-card {
      padding: 0 2vw;
      max-width: 98vw;
    }
    .scan-reports-list .file-name {
      max-width: 90px;
      font-size: 0.97rem;
    }
    .scan-reports-list li {
      padding: 0.7rem 0.5rem;
    }
    .scan-reports-card .card-header {
      font-size: 1.1rem;
      padding: 0.8rem 1rem;
    }
  }
</style>

<h2 class="mb-4">Scan Reports</h2>
<table class="table table-hover align-middle shadow-sm rounded">
  <thead class="table-primary">
    <tr>
      <th scope="col"><i class="bi bi-file-earmark"></i> File Name</th>
      <th scope="col"><i class="bi bi-shield-check"></i> Status</th>
      <th scope="col"><i class="bi bi-calendar"></i> Date</th>
      <th scope="col"><i class="bi bi-gear"></i> Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for report in reports %}
    <tr>
      <td
        class="fw-semibold text-primary"
        style="
          max-width: 220px;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        "
      >
        <i class="bi bi-file-earmark-text"></i> {{ report.file.name|default:"-"
        }}
      </td>
      <td>
        {% if report.status == "CLEAN" %}
        <span class="badge bg-success"
          ><i class="bi bi-shield-check"></i> Clean</span
        >
        {% elif report.status == "MALICIOUS" %}
        <span class="badge bg-danger"><i class="bi bi-bug"></i> Malicious</span>
        {% else %}
        <span class="badge bg-secondary"
          >{{ report.status|default:"Unknown" }}</span
        >
        {% endif %}
      </td>
      <td>
        <i class="bi bi-clock-history"></i>
        {{ report.uploaded_at|date:"Y-m-d H:i" }}
      </td>
      <td>
        <form
          method="post"
          action="{% url 'delete_scan_report' report.id %}"
          style="display: inline"
        >
          {% csrf_token %}
          <button
            type="submit"
            class="btn btn-outline-danger btn-sm"
            title="Delete"
            onclick="return confirm('Delete this report?');"
          >
            <i class="bi bi-trash"></i>
          </button>
        </form>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="4" class="text-center text-secondary py-4">
        <i class="bi bi-emoji-frown" style="font-size: 2rem"></i><br />
        No reports found.
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
